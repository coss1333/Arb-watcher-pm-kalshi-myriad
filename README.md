# Cross-Platform Arbitrage Watcher (Polymarket • Kalshi • Myriad)

Инструмент сравнивает бинарные рынки на трёх платформах и присылает сообщение в Telegram, если найдена *гарантированная* арбитражная схема типа:
купить **YES** на площадке A и **NO** на площадке B так, чтобы суммарная стоимость позиций (с учётом комиссий) была **меньше 1**, а выплаты после комиссий ≥ 1 в любом исходе.

## Критерий арбитража
Ставки масштабируются так, чтобы целевая выплата после комиссий в обоих исходах была 1. Тогда требуемые доли ставок:
- YES на A: `x = 1/(1 - fee_A)`
- NO  на B: `y = 1/(1 - fee_B)`

Суммарная стоимость `cost = x*price_yes_A + y*price_no_B`.  
**Edge (%) = (1 - cost) * 100**. Алёрт → если `Edge >= min_edge_percent` из `config.yaml`.

> Это консервативная модель: комиссия учитывается как скидка с выплат. Отрегулируйте `fees_percent` под свои условия.

## Установка
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

## Настройка
1. Скопируйте `.env.example` → `.env` и заполните `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID`.  
   Опционально: `KALSHI_EMAIL/PASSWORD`, `MYRIAD_API_BASE` (+ ключ, если нужен).
2. Отредактируйте `config.yaml` (порог доходности, комиссии, ликвидность, жёсткость мэтчинга заголовков).

## Запуск
Разовый прогон:
```bash
RUN_ONCE=1 python arbitrage_watcher.py
```
Демон:
```bash
RUN_ONCE=0 python arbitrage_watcher.py
```

## Замечания
- Сопоставление тем — по фаззи‑сходству заголовков. При необходимости повышайте `title_similarity_threshold` и пополняйте `exclude_keywords`.
- Если логин/эндпоинты для Kalshi/Myriad не заданы, эти площадки пропускаются (Polymarket работает «из коробки»).
- Инструмент только уведомляет, сделки не совершает. Учитывайте реальные комиссии, проскальзывание, лимиты, правила расчёта, возможность инвалидейшна событий.
